# ninja-points

This repo helps us calculate point values from contributions to our github and trello spaces.

## GitHub contributions

For contributions to GitHub, we use search filters to find people's contributions. You can run these from [github.com/pulls](https://github.com/pulls)

### Bugfix Pull Request

For example, to find all eligible bugfix pull requests:

```
is:merged is:pr archived:false user:redhat-cop author:etsauer updated:>=2017-03-01 -label:enhancement
```

### Enhancement Pull Request

```
is:merged is:pr archived:false user:redhat-cop label:enhancement author:etsauer updated:>=2017-03-01
```

### Reviewed pull requests

```
is:merged is:pr archived:false user:redhat-cop reviewed-by:etsauer updated:>=2017-03-01
```

### Closed Issues

```
is:closed is:issue archived:false user:redhat-cop assignee:etsauer updated:>=2017-03-01
```


### Script

A script called [github-stats.py](tgithub-stats.py) is available to automate the aggregation of statistics from the [redhat-cop GitHub organization](https://github.com/redhat-cop).

To be able to query the GitHub API, create a new [Personal Access Token](https://github.com/settings/tokens). Configure a key with at least read access.

Then configure the `GITHUB_API_TOKEN` environment variable as follows:

```
export GITHUB_API_TOKEN='<API_KEY>'
```

Execute the script:

```
$ ./github-stats.py

=== Statistics for GitHub Organization 'redhat-cop' ====

== General PR's ==

csmith - 1
   ninja-points - Enhancement to GitHub script
```

By default, the script uses a search range from March 1 of a calendar year to the present. To specify an alternate date, use the `--start-date` argument such as `--start-date=2017-09-01`.

To limit to a specific user, the `--username` parameter can be specified.

To filter by labels, the `--labels` parameter can be specified followed by a series of comma separated labels (such as `enhancement,bugfix`). To limit the results containing a label, add a `-` at the end of the label name, such as `bugfix-` If no label parameter is specified, the _enhancement_ label is automatically applied.


## Trello

### Cards Completed By Member worth 2 points

```
list:Done member:andrewblock edited:365 name:"\(2\)"
```

### Script

A script called [trello-stats.py](trello-stats.py) is available to automate the aggregation of statistics of cards within an organization

First, get an API key [here](https://trello.com/app-key)

Then, configure the following variables:

```
TRELLO_API_KEY = '<API_KEY>'
TRELLO_API_TOKEN = '<API_TOKEN>'
```

Execute the script:

```
$ ./trello-stats.py
=== Statistics for Trello Team 'Red Hat CoP' ====

csmith has 2 cards
   - Board: RHEL Platform | Card: Document SELinux Booleans
   - Board: OpenShift Container Platform | Card: Add input field to product page

jdoe has 1 cards
   - Board: OpenShift Container Platform | Card: E2E Test Enhancements
```

By default, the script uses a search range from March 1 of a calendar year to the present. To specify an alternate date, use the `--start-date` argument such as `--start-date=2017-09-01`.

To limit to a specific user, the `--username` parameter can be specified.

Additional queries can be generated by referencing the following:

http://help.trello.com/article/808-searching-for-cards-all-boards
